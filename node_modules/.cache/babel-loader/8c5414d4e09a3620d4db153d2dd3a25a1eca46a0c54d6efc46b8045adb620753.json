{"ast":null,"code":"// src/Main.js (Updated handleAddToWatchlist function)\nimport React,{useState}from'react';import{useNavigate}from'react-router-dom';import'./Main.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Main=()=>{const[searchQuery,setSearchQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[error,setError]=useState('');const[selectedMovie,setSelectedMovie]=useState(null);const[isPopupOpen,setIsPopupOpen]=useState(false);const navigate=useNavigate();const apiKey=process.env.REACT_APP_API_KEY;const handleSearch=async()=>{try{const response=await fetch(\"https://www.omdbapi.com/?s=\".concat(searchQuery,\"&apikey=\").concat(apiKey));const data=await response.json();if(data.Response==='True'){setSearchResults(data.Search);setError('');}else{setSearchResults([]);setError(data.Error);}}catch(error){console.error('Error fetching data:',error);setError('An error occurred while fetching data');}};const handleMovieClick=async movie=>{try{const response=await fetch(\"https://www.omdbapi.com/?i=\".concat(movie.imdbID,\"&apikey=\").concat(apiKey));const data=await response.json();if(data.Response==='True'){setSelectedMovie(data);setIsPopupOpen(true);}else{console.error('Error fetching movie details:',data.Error);}}catch(error){console.error('Error fetching movie details:',error);}};const handleClosePopup=()=>{setIsPopupOpen(false);};const handleLogout=()=>{localStorage.removeItem('loggedInUser');navigate('/login');};const handleAddToWatchlist=movie=>{const loggedInUser=localStorage.getItem('loggedInUser');if(!loggedInUser){// Handle case where user is not logged in\nreturn;}const storedWatchlist=localStorage.getItem(\"watchlist_\".concat(loggedInUser));const watchlist=storedWatchlist?JSON.parse(storedWatchlist):[];if(!watchlist.find(item=>item.imdbID===movie.imdbID)){watchlist.push(movie);localStorage.setItem(\"watchlist_\".concat(loggedInUser),JSON.stringify(watchlist));alert('Movie added to watchlist');}else{alert('Movie already in watchlist');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Movie Hunter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/watchlist'),className:\"watchlist-button\",children:\"My Watchlist\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"logout-button\",children:\"Logout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Enter movie title...\",className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,className:\"search-button\",children:\"Search\"})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-list\",children:searchResults.map(movie=>/*#__PURE__*/_jsxs(\"div\",{className:\"movie-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:movie.Title,className:\"movie-poster\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"movie-title\",children:movie.Title}),/*#__PURE__*/_jsxs(\"p\",{className:\"movie-year\",children:[\"Year: \",movie.Year]}),/*#__PURE__*/_jsx(\"button\",{className:\"details-button\",onClick:()=>handleMovieClick(movie),children:\"details\"}),/*#__PURE__*/_jsx(\"button\",{className:\"watchlist-button\",onClick:()=>handleAddToWatchlist(movie),children:\"Add to Watchlist\"})]})]},movie.imdbID))}),isPopupOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"popup-overlay\",onClick:handleClosePopup,children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-button\",onClick:handleClosePopup,children:\"X\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"movie-image-container\",children:/*#__PURE__*/_jsx(\"img\",{src:selectedMovie.Poster,alt:selectedMovie.Title,className:\"popup-movie-poster\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:selectedMovie.Title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Year: \",selectedMovie.Year]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Type: \",selectedMovie.Type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"IMDB Rating: \",selectedMovie.imdbRating]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Description: \",selectedMovie.Plot]})]})]})]})})]});};export default Main;","map":{"version":3,"names":["React","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","Main","searchQuery","setSearchQuery","searchResults","setSearchResults","error","setError","selectedMovie","setSelectedMovie","isPopupOpen","setIsPopupOpen","navigate","apiKey","process","env","REACT_APP_API_KEY","handleSearch","response","fetch","concat","data","json","Response","Search","Error","console","handleMovieClick","movie","imdbID","handleClosePopup","handleLogout","localStorage","removeItem","handleAddToWatchlist","loggedInUser","getItem","storedWatchlist","watchlist","JSON","parse","find","item","push","setItem","stringify","alert","className","children","onClick","type","value","onChange","e","target","placeholder","map","src","Poster","alt","Title","Year","Type","imdbRating","Plot"],"sources":["C:/raees/aman/Projects/Movie/src/Commponant/Main/Main.jsx"],"sourcesContent":["// src/Main.js (Updated handleAddToWatchlist function)\r\nimport React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './Main.css';\r\n\r\nconst Main = () => {\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [searchResults, setSearchResults] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [selectedMovie, setSelectedMovie] = useState(null);\r\n  const [isPopupOpen, setIsPopupOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  const apiKey = process.env.REACT_APP_API_KEY;\r\n\r\n  const handleSearch = async () => {\r\n    try {\r\n      const response = await fetch(`https://www.omdbapi.com/?s=${searchQuery}&apikey=${apiKey}`);\r\n      const data = await response.json();\r\n\r\n      if (data.Response === 'True') {\r\n        setSearchResults(data.Search);\r\n        setError('');\r\n      } else {\r\n        setSearchResults([]);\r\n        setError(data.Error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching data:', error);\r\n      setError('An error occurred while fetching data');\r\n    }\r\n  };\r\n\r\n  const handleMovieClick = async (movie) => {\r\n    try {\r\n      const response = await fetch(`https://www.omdbapi.com/?i=${movie.imdbID}&apikey=${apiKey}`);\r\n      const data = await response.json();\r\n\r\n      if (data.Response === 'True') {\r\n        setSelectedMovie(data);\r\n        setIsPopupOpen(true);\r\n      } else {\r\n        console.error('Error fetching movie details:', data.Error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching movie details:', error);\r\n    }\r\n  };\r\n\r\n  const handleClosePopup = () => {\r\n    setIsPopupOpen(false);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('loggedInUser');\r\n    navigate('/login');\r\n  };\r\n\r\n  const handleAddToWatchlist = (movie) => {\r\n    const loggedInUser = localStorage.getItem('loggedInUser');\r\n    if (!loggedInUser) {\r\n      // Handle case where user is not logged in\r\n      return;\r\n    }\r\n  \r\n    const storedWatchlist = localStorage.getItem(`watchlist_${loggedInUser}`);\r\n    const watchlist = storedWatchlist ? JSON.parse(storedWatchlist) : [];\r\n  \r\n    if (!watchlist.find(item => item.imdbID === movie.imdbID)) {\r\n      watchlist.push(movie);\r\n      localStorage.setItem(`watchlist_${loggedInUser}`, JSON.stringify(watchlist));\r\n      alert('Movie added to watchlist');\r\n    } else {\r\n      alert('Movie already in watchlist');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"main-container\">\r\n      <div className=\"header\">\r\n        <h2>Movie Hunter</h2>\r\n        <button onClick={() => navigate('/watchlist')} className=\"watchlist-button\">My Watchlist</button>\r\n        <button onClick={handleLogout} className=\"logout-button\">Logout</button>\r\n      </div>\r\n      <div className=\"search-container\">\r\n        <input\r\n          type=\"text\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n          placeholder=\"Enter movie title...\"\r\n          className=\"search-input\"\r\n        />\r\n        <button onClick={handleSearch} className=\"search-button\">Search</button>\r\n      </div>\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n      <div className=\"movie-list\">\r\n        {searchResults.map((movie) => (\r\n          <div key={movie.imdbID} className=\"movie-card\" >\r\n            <img src={movie.Poster} alt={movie.Title} className=\"movie-poster\" />\r\n            <div className=\"movie-details\">\r\n              <h3 className=\"movie-title\">{movie.Title}</h3>\r\n              <p className=\"movie-year\">Year: {movie.Year}</p>\r\n              <button className='details-button' onClick={() => handleMovieClick(movie)}>details</button>\r\n              <button\r\n                className=\"watchlist-button\"\r\n                onClick={() => handleAddToWatchlist(movie)}\r\n              >\r\n                Add to Watchlist\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      {isPopupOpen && (\r\n        <div className=\"popup-overlay\" onClick={handleClosePopup}>\r\n          <div className=\"popup\">\r\n            <button className=\"close-button\" onClick={handleClosePopup}>X</button>\r\n            <div className=\"popup-content\">\r\n              <div className=\"movie-image-container\">\r\n                <img src={selectedMovie.Poster} alt={selectedMovie.Title} className=\"popup-movie-poster\" />\r\n              </div>\r\n              <div className=\"movie-details\">\r\n                <h2>{selectedMovie.Title}</h2>\r\n                <p>Year: {selectedMovie.Year}</p>\r\n                <p>Type: {selectedMovie.Type}</p>\r\n                <p>IMDB Rating: {selectedMovie.imdbRating}</p>\r\n                <p>Description: {selectedMovie.Plot}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}